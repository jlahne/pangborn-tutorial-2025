<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Fine-Tuning Publication-Quality ggplots | Publication-quality data visualizations using the R tidyverse</title>
  <meta name="description" content="5 Fine-Tuning Publication-Quality ggplots | Publication-quality data visualizations using the R tidyverse" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Fine-Tuning Publication-Quality ggplots | Publication-quality data visualizations using the R tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="lhami/sensometrics-tutorial-2024" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Fine-Tuning Publication-Quality ggplots | Publication-quality data visualizations using the R tidyverse" />
  
  
  

<meta name="author" content="Jacob Lahne" />
<meta name="author" content="Leah Hamilton" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="using-ggplot-with-other-packages.html"/>
<link rel="next" href="wrap-up-and-further-resources.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction and welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introductions"><i class="fa fa-check"></i>Introductions</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#leah-hamilton-phd"><i class="fa fa-check"></i>Leah Hamilton, PhD</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#jacob-lahne-phd"><i class="fa fa-check"></i>Jacob Lahne, PhD</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#todays-agenda"><i class="fa fa-check"></i>Today’s agenda</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-were-going-to-run"><i class="fa fa-check"></i>How we’re going to run</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended-approach-for-livecoding"><i class="fa fa-check"></i>Recommended approach for livecoding</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dealing-with-errors"><i class="fa fa-check"></i>Dealing with errors</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#psa-not-knowing-is-normal"><i class="fa fa-check"></i>PSA: not-knowing is normal!</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-help"><i class="fa fa-check"></i>Getting Help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> A crash course in <code>R</code> and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#r-vs-rstudio"><i class="fa fa-check"></i><b>1.1</b> <code>R</code> vs RStudio</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#what-is-r"><i class="fa fa-check"></i><b>1.1.1</b> What is <code>R</code>?</a></li>
<li class="chapter" data-level="1.1.2" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#great-why-are-we-using-rstudio-then"><i class="fa fa-check"></i><b>1.1.2</b> Great, why are we using RStudio then?</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#the-parts-of-rstudio"><i class="fa fa-check"></i><b>1.2</b> The parts of RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#the-working-directory-and-why-you-should-care"><i class="fa fa-check"></i><b>1.2.1</b> The “working directory” and why you should care</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#extending-r-with-packages"><i class="fa fa-check"></i><b>1.3</b> Extending <code>R</code> with packages</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#loading-packages"><i class="fa fa-check"></i><b>1.3.1</b> Loading packages</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#making-r-do-stuff"><i class="fa fa-check"></i><b>1.4</b> Making <code>R</code> do stuff</a></li>
<li class="chapter" data-level="1.5" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#livecoding-along"><i class="fa fa-check"></i><b>1.5</b> Livecoding along</a></li>
<li class="chapter" data-level="1.6" data-path="a-crash-course-in-r-and-rstudio.html"><a href="a-crash-course-in-r-and-rstudio.html#summary-and-next-steps"><i class="fa fa-check"></i><b>1.6</b> Summary and next steps</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html"><i class="fa fa-check"></i><b>2</b> Importing and wrangling data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#motivation-exploring-berry-and-cider-cataliking-data"><i class="fa fa-check"></i><b>2.1</b> Motivation: exploring berry and cider CATA/liking data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#berries"><i class="fa fa-check"></i><b>2.1.1</b> Berries</a></li>
<li class="chapter" data-level="2.1.2" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#cider"><i class="fa fa-check"></i><b>2.1.2</b> Cider</a></li>
<li class="chapter" data-level="2.1.3" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#publication-quality"><i class="fa fa-check"></i><b>2.1.3</b> “Publication quality”</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#getting-data-into-r"><i class="fa fa-check"></i><b>2.2</b> Getting data into <code>R</code></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#where-the-data-live"><i class="fa fa-check"></i><b>2.2.1</b> Where the data live</a></li>
<li class="chapter" data-level="2.2.2" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#getting-different-kinds-of-files-into-r"><i class="fa fa-check"></i><b>2.2.2</b> Getting different kinds of files into <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#wrangling-selecting-filtering-reshaping-data"><i class="fa fa-check"></i><b>2.3</b> Wrangling (selecting, filtering, reshaping) data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#the-pipe-for-multiple-steps-in-a-workflow"><i class="fa fa-check"></i><b>2.3.1</b> The “pipe” for multiple steps in a workflow: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#subsetting-your-data"><i class="fa fa-check"></i><b>2.3.2</b> Subsetting your data</a></li>
<li class="chapter" data-level="2.3.3" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#reshaping-your-data"><i class="fa fa-check"></i><b>2.3.3</b> Reshaping your data</a></li>
<li class="chapter" data-level="2.3.4" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#some-convenience-functions"><i class="fa fa-check"></i><b>2.3.4</b> Some convenience functions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#saving-your-data"><i class="fa fa-check"></i><b>2.4</b> Saving your data</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#a-note-on-replicability"><i class="fa fa-check"></i><b>2.4.1</b> A note on replicability</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="importing-and-wrangling-data.html"><a href="importing-and-wrangling-data.html#wrap-up"><i class="fa fa-check"></i><b>2.5</b> Wrap up</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html"><i class="fa fa-check"></i><b>3</b> The basics of plotting with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#your-first-ggplot"><i class="fa fa-check"></i><b>3.1</b> Your first <code>ggplot()</code></a></li>
<li class="chapter" data-level="3.2" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#the-aes-function-and-mapping-argument"><i class="fa fa-check"></i><b>3.2</b> The <code>aes()</code> function and <code>mapping =</code> argument</a></li>
<li class="chapter" data-level="3.3" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#adding-layers-with-geom_-functions"><i class="fa fa-check"></i><b>3.3</b> Adding layers with <code>geom_*()</code> functions</a></li>
<li class="chapter" data-level="3.4" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#arguments-inside-and-outside-of-aes"><i class="fa fa-check"></i><b>3.4</b> Arguments inside and outside of <code>aes()</code></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#using-theme_-to-change-visual-options-quickly"><i class="fa fa-check"></i><b>3.4.1</b> Using <code>theme_*()</code> to change visual options quickly</a></li>
<li class="chapter" data-level="3.4.2" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#changing-aesthetic-elements-with-scale_-functions"><i class="fa fa-check"></i><b>3.4.2</b> Changing aesthetic elements with <code>scale_*()</code> functions</a></li>
<li class="chapter" data-level="3.4.3" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#finally-facet_"><i class="fa fa-check"></i><b>3.4.3</b> Finally, <code>facet_*()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="the-basics-of-plotting-with-ggplot2.html"><a href="the-basics-of-plotting-with-ggplot2.html#some-further-reading"><i class="fa fa-check"></i><b>3.5</b> Some further reading</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html"><i class="fa fa-check"></i><b>4</b> Using ggplot with Other Packages</a>
<ul>
<li class="chapter" data-level="4.1" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#data-for-the-rest-of-the-tutorial"><i class="fa fa-check"></i><b>4.1</b> Data for the rest of the tutorial</a></li>
<li class="chapter" data-level="4.2" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#new-geom_s-and-stat_s"><i class="fa fa-check"></i><b>4.2</b> New <code>geom_*()s</code> and <code>stat_*()</code>s</a></li>
<li class="chapter" data-level="4.3" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#new-theme_s-and-scale_s"><i class="fa fa-check"></i><b>4.3</b> New <code>theme_*()</code>s and <code>scale_*()</code>s</a></li>
<li class="chapter" data-level="4.4" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#modifying-ggplots-made-by-other-packages"><i class="fa fa-check"></i><b>4.4</b> Modifying <code>ggplot()</code>s made by other packages</a></li>
<li class="chapter" data-level="4.5" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#combining-plots"><i class="fa fa-check"></i><b>4.5</b> Combining Plots</a></li>
<li class="chapter" data-level="4.6" data-path="using-ggplot-with-other-packages.html"><a href="using-ggplot-with-other-packages.html#finding-new-packages"><i class="fa fa-check"></i><b>4.6</b> Finding New Packages</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html"><i class="fa fa-check"></i><b>5</b> Fine-Tuning Publication-Quality ggplots</a>
<ul>
<li class="chapter" data-level="5.1" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#exporting-and-saving-plots"><i class="fa fa-check"></i><b>5.1</b> Exporting and Saving Plots</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#what-format"><i class="fa fa-check"></i><b>5.1.1</b> What format?</a></li>
<li class="chapter" data-level="5.1.2" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#exporting-images-with-ggsave"><i class="fa fa-check"></i><b>5.1.2</b> Exporting Images with <code>ggsave()</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#image-sizes-and-raster-resolutions"><i class="fa fa-check"></i><b>5.1.3</b> Image Sizes and Raster Resolutions</a></li>
<li class="chapter" data-level="5.1.4" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#other-image-export-options"><i class="fa fa-check"></i><b>5.1.4</b> Other Image Export Options</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#making-text-look-okay"><i class="fa fa-check"></i><b>5.2</b> Making Text Look Okay</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#powerful-text-manipulation-with-stringr"><i class="fa fa-check"></i><b>5.2.1</b> Powerful Text Manipulation with <code>stringr</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#stringr-and-regular-expressions-a-small-tangent"><i class="fa fa-check"></i><b>5.2.2</b> <code>stringr</code> and Regular Expressions (A small tangent)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#removing-legends-and-plot-elements"><i class="fa fa-check"></i><b>5.3</b> Removing Legends and Plot Elements</a></li>
<li class="chapter" data-level="5.4" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#ordered-categorical-variables"><i class="fa fa-check"></i><b>5.4</b> Ordered Categorical Variables</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#specifying-ordinal-variables-as-factors"><i class="fa fa-check"></i><b>5.4.1</b> Specifying Ordinal Variables as Factors</a></li>
<li class="chapter" data-level="5.4.2" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#facets-with-different-category-orders"><i class="fa fa-check"></i><b>5.4.2</b> Facets with Different Category-Orders</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="fine-tuning-publication-quality-ggplots.html"><a href="fine-tuning-publication-quality-ggplots.html#putting-it-all-together"><i class="fa fa-check"></i><b>5.5</b> Putting it all together</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html"><i class="fa fa-check"></i><b>6</b> Wrap-up and further resources</a>
<ul>
<li class="chapter" data-level="6.1" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#getting-help-1"><i class="fa fa-check"></i><b>6.1</b> Getting help</a></li>
<li class="chapter" data-level="6.2" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#learning-more-with-sensometrics-society"><i class="fa fa-check"></i><b>6.2</b> Learning more with Sensometrics Society</a></li>
<li class="chapter" data-level="6.3" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#further-readingresources"><i class="fa fa-check"></i><b>6.3</b> Further reading/resources</a></li>
<li class="chapter" data-level="6.4" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#questionscomments"><i class="fa fa-check"></i><b>6.4</b> Questions/Comments</a></li>
<li class="chapter" data-level="6.5" data-path="wrap-up-and-further-resources.html"><a href="wrap-up-and-further-resources.html#references"><i class="fa fa-check"></i><b>6.5</b> References</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Publication-quality data visualizations using the R tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="fine-tuning-publication-quality-ggplots" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Fine-Tuning Publication-Quality ggplots<a href="fine-tuning-publication-quality-ggplots.html#fine-tuning-publication-quality-ggplots" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The plots we’ve been making so far are fairly straightforward demonstrations. At the very end of Chapter 3, we briefly showed you the code and results for this plot:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="fine-tuning-publication-quality-ggplots.html#cb160-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="fine-tuning-publication-quality-ggplots.html#cb160-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="fine-tuning-publication-quality-ggplots.html#cb160-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb160-4"><a href="fine-tuning-publication-quality-ggplots.html#cb160-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb160-5"><a href="fine-tuning-publication-quality-ggplots.html#cb160-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-6"><a href="fine-tuning-publication-quality-ggplots.html#cb160-6" tabindex="-1"></a>  <span class="fu">separate</span>(cata_variable, </span>
<span id="cb160-7"><a href="fine-tuning-publication-quality-ggplots.html#cb160-7" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;mode&quot;</span>, <span class="st">&quot;variable&quot;</span>), </span>
<span id="cb160-8"><a href="fine-tuning-publication-quality-ggplots.html#cb160-8" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-9"><a href="fine-tuning-publication-quality-ggplots.html#cb160-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">penalty_lift =</span> checked_1 <span class="sc">-</span> checked_0,</span>
<span id="cb160-10"><a href="fine-tuning-publication-quality-ggplots.html#cb160-10" tabindex="-1"></a>         <span class="at">mode =</span> <span class="fu">case_when</span>(mode <span class="sc">==</span> <span class="st">&quot;taste&quot;</span> <span class="sc">~</span> <span class="st">&quot;(T)&quot;</span>,</span>
<span id="cb160-11"><a href="fine-tuning-publication-quality-ggplots.html#cb160-11" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearance&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>,</span>
<span id="cb160-12"><a href="fine-tuning-publication-quality-ggplots.html#cb160-12" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearane&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb160-13"><a href="fine-tuning-publication-quality-ggplots.html#cb160-13" tabindex="-1"></a>  <span class="fu">unite</span>(variable, mode, <span class="at">col =</span> <span class="st">&quot;cata_variable&quot;</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-14"><a href="fine-tuning-publication-quality-ggplots.html#cb160-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> tidytext<span class="sc">::</span><span class="fu">reorder_within</span>(<span class="at">x =</span> cata_variable,</span>
<span id="cb160-15"><a href="fine-tuning-publication-quality-ggplots.html#cb160-15" tabindex="-1"></a>                                                  <span class="at">by =</span> penalty_lift,</span>
<span id="cb160-16"><a href="fine-tuning-publication-quality-ggplots.html#cb160-16" tabindex="-1"></a>                                                  <span class="at">within =</span> berry)) <span class="sc">%&gt;%</span></span>
<span id="cb160-17"><a href="fine-tuning-publication-quality-ggplots.html#cb160-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cata_variable, <span class="at">y =</span> penalty_lift)) <span class="sc">+</span></span>
<span id="cb160-18"><a href="fine-tuning-publication-quality-ggplots.html#cb160-18" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> penalty_lift), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb160-19"><a href="fine-tuning-publication-quality-ggplots.html#cb160-19" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>berry, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb160-20"><a href="fine-tuning-publication-quality-ggplots.html#cb160-20" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">scale_x_reordered</span>() <span class="sc">+</span> </span>
<span id="cb160-21"><a href="fine-tuning-publication-quality-ggplots.html#cb160-21" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb160-22"><a href="fine-tuning-publication-quality-ggplots.html#cb160-22" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb160-23"><a href="fine-tuning-publication-quality-ggplots.html#cb160-23" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;tan&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span> </span>
<span id="cb160-24"><a href="fine-tuning-publication-quality-ggplots.html#cb160-24" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb160-25"><a href="fine-tuning-publication-quality-ggplots.html#cb160-25" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Penalty / Lift Analysis&quot;</span>,</span>
<span id="cb160-26"><a href="fine-tuning-publication-quality-ggplots.html#cb160-26" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;displays the mean difference (within berries) for when a CATA variable is checked</span><span class="sc">\n</span><span class="st">or un-checked&quot;</span>) <span class="ot">-&gt;</span></span>
<span id="cb160-27"><a href="fine-tuning-publication-quality-ggplots.html#cb160-27" tabindex="-1"></a>  goal_plot</span>
<span id="cb160-28"><a href="fine-tuning-publication-quality-ggplots.html#cb160-28" tabindex="-1"></a></span>
<span id="cb160-29"><a href="fine-tuning-publication-quality-ggplots.html#cb160-29" tabindex="-1"></a>goal_plot</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/penalty%20analysis%20example-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Which uses some tricks from the <code>stringr</code> and <code>tidytext</code> packages in order to give us easy-to-read labels. Using the existing column names and variable-codes in our original data to make a first draft of a plot, it would’ve looked more like this:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="fine-tuning-publication-quality-ggplots.html#cb161-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb161-2"><a href="fine-tuning-publication-quality-ggplots.html#cb161-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb161-3"><a href="fine-tuning-publication-quality-ggplots.html#cb161-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb161-4"><a href="fine-tuning-publication-quality-ggplots.html#cb161-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb161-5"><a href="fine-tuning-publication-quality-ggplots.html#cb161-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-6"><a href="fine-tuning-publication-quality-ggplots.html#cb161-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">penalty_lift =</span> checked_1 <span class="sc">-</span> checked_0) <span class="sc">%&gt;%</span></span>
<span id="cb161-7"><a href="fine-tuning-publication-quality-ggplots.html#cb161-7" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cata_variable, <span class="at">y =</span> penalty_lift)) <span class="sc">+</span></span>
<span id="cb161-8"><a href="fine-tuning-publication-quality-ggplots.html#cb161-8" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> penalty_lift), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb161-9"><a href="fine-tuning-publication-quality-ggplots.html#cb161-9" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>berry, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb161-10"><a href="fine-tuning-publication-quality-ggplots.html#cb161-10" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb161-11"><a href="fine-tuning-publication-quality-ggplots.html#cb161-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb161-12"><a href="fine-tuning-publication-quality-ggplots.html#cb161-12" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;tan&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkgreen&quot;</span>)</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/worse%20penalty%20analysis%20example-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Which we’re showing because we have seen similar plots published in journal articles, with the overlapping text, redundant axis labels, and all. We can make this more readable by reordering the CATA attributes, shortening and reformatting the labels, and possibly by removing some extraneous elements like the <code>cata_variable</code> label on the Y axis. These are common steps that make a huge difference.</p>
<p>And we’ll get there, but first…</p>
<div id="exporting-and-saving-plots" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Exporting and Saving Plots<a href="fine-tuning-publication-quality-ggplots.html#exporting-and-saving-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It may seem like a weird time to be talking about saving plots, when we haven’t gotten to the “fine-tuning” yet, but you should already be familiar with a few examples of things that change when the aspect ratio of the plot or the monitor you’re viewing it on changes slightly. It is basically impossible to export a <code>ggplot</code> at the resolution needed for publishing without changing the aspect ratio, relative sizes, or space between some elements from what you’re looking at in the Plots pane or the <code>.Rmd</code> chunk output.</p>
<p>It’s good practice to export your plot as an image (or pdf or knit-together document or however else you plan to export it) and re-export it periodically as you go through fine-tuning.</p>
<p>This is also, probably, the most important part of this chapter. You will have to get every plot that you publish out of <code>R</code> somehow, after all! After that, we’ll cover some tricks that we draw upon frequently, but you may find that you have different problems or priorities, or that some of these needs are situational.</p>
<p>But you will have to export plots for every project you want to share with the world.</p>
<div id="what-format" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> What format?<a href="fine-tuning-publication-quality-ggplots.html#what-format" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can, as we’ve already discussed, save a <code>ggplot</code> object in a <code>.rds</code> file. But that won’t let you put it into your powerpoint, or manuscript, or take it to the printer. You need an image file. The exact <em>type</em> of image will depend on the other software you’re using for your report, presentation, paper, book, etc.</p>
<p>There are two major ways to save the kind of spatial color data that comprise images such as graphs. You can store them as <strong>vector graphics</strong>, which can be rescaled because they’re made up of lines and shapes (we’ll be talking about <code>.pdf</code> and <code>.svg</code>) or as <strong>raster (bitmap) graphics</strong>, which store images as a grid of <strong>pixels</strong> which each have a single uniform color (we’ll be talking about <code>.png</code> and <code>.jpeg</code>).</p>
<p><code>.pdf</code> vector images are best for <strong>LaTeX</strong> and professional publishing
<code>.svg</code> vector images are more widely supported in word processors and websites
<code>.png</code> raster images are the most predictable to print, the best for web publishing, and can be used in pretty much every software ever made, <em>if</em> you know exactly the size you want.
<code>.jpeg</code> (along with <code>.tiff</code>) raster images are the raster format preferred by <em>Food Quality and Preference</em> editors. They are worse for web publishing than <code>.png</code> but share its other advantages.</p>
<p>Note that <code>ggsave()</code> is like making a <code>.pdf</code> version of your working documents: you will not be able to read the plot images into <code>R</code> for editing anymore, no matter which format you save in.</p>
</div>
<div id="exporting-images-with-ggsave" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Exporting Images with <code>ggsave()</code><a href="fine-tuning-publication-quality-ggplots.html#exporting-images-with-ggsave" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The easiest way to reproducibly save plots, so that all of your export options are in your code and you might be able to recreate it on a different computer, is with the function <code>ggplot2::ggsave()</code>, which works <em>similarly</em> to the <code>write_*()</code> functions and <code>save()</code>. You give it a file name to save to, relative to the current working directory, and then the variable where your plot is saved.</p>
<p><code>ggsave()</code> supports all of the above-named image formats, as well as <code>.eps</code>, <code>.ps</code>, <code>.tex</code> (pictex), and <code>.bmp</code>. If you’re reading this right now, you’re looking at a webpage created using <code>bookdown</code> and <code>knitr</code>. We can’t actually directly embed <code>.pdf</code> images in this site, but let’s look at a few other example formats using the same plots.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="fine-tuning-publication-quality-ggplots.html#cb162-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-svg.svg&quot;</span>, goal_plot)</span></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="fine-tuning-publication-quality-ggplots.html#cb164-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-png.png&quot;</span>, goal_plot)</span></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="fine-tuning-publication-quality-ggplots.html#cb166-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-jpeg.jpeg&quot;</span>, goal_plot)</span></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<p>It will figure out from the file extension (the stuff after the <code>.</code> in the <code>filename</code> argument) what image type it’s saving as, but you can also specify it explicitly with the <code>device</code> argument.</p>
<p>Now let’s compare how each of these looks!</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="fine-tuning-publication-quality-ggplots.html#cb168-1" tabindex="-1"></a>goal_plot <span class="co"># If you&#39;re following along, this will look different in your R session!</span></span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/viewing%20the%20plot%20inside%20R-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The <code>.svg</code> image made by <code>ggsave()</code>:</p>
<p><img src="img/penalty-lift-svg.svg" width="672px" style="display: block; margin: auto;" /></p>
<p>The <code>.png</code> image made by <code>ggsave()</code>:</p>
<p><img src="img/penalty-lift-png.png" width="672px" style="display: block; margin: auto;" /></p>
<p>The <code>.jpeg</code> image made by <code>ggsave()</code>:</p>
<p><img src="img/penalty-lift-jpeg.jpeg" width="672px" style="display: block; margin: auto;" /></p>
<p>The two raster formats look basically the same, and only slightly different from the <code>.svg</code> and the version in the <code>.html</code> version of this tutorial. If you’re following along in your own <code>R</code> session, however, you’ll notice that these saved plots all look more similar to each other than they do to the initial plot you’re previewing inside <code>R</code>. <em>All</em> of the plots have a bit more space around the text using <code>ggsave()</code>, taller bars, and a different aspect ratio.</p>
<p>We can adjust these using the rest of the arguments to <code>ggsave()</code>, namely the <code>scale</code>, <code>width</code>, <code>height</code>, <code>units</code>, and, for raster images, <code>dpi</code>.</p>
<p>You might be surprised that vector images have height and width options, because we already said they don’t have a fixed display size, but as you saw a few code chunks ago, <code>ggsave()</code> picked a default image size of 7x7 inches when we didn’t specify. The height and width are mostly important for determining the relative sizing of elements like text and whitespace.</p>
<p><code>ggplot2</code> actually saves the sizes of certain plot elements, namely <em>text</em> and most <code>geom_*()</code>s, in inches or millimeters. When it has to construct an actual version of the plot at a given size, it tries to keep all of the 12-pt text 1/6” tall (1 inch = 72 points). This 12-point font will take up a very small amount of a 4-foot-tall image, but a sixth of a 1” image.</p>
<p>The fact that you can then print the <code>.svg</code> at any size you want is out of <code>ggplot2</code>’s hands. It will try to make the fonts and elements the right size for the size you’re <em>telling it</em> you will print.</p>
<p>If you get to this stage and realize that all of the fixed-size elements (e.g., text) are too big or too small, you can use <code>ggsave()</code>’s <code>scale</code> argument. <code>scale</code> &lt; 1 makes all the fixed-size elements <em>smaller</em> relative to the plot size and <code>scale</code> &gt; 1 makes all the elements <em>bigger</em> relative to the plot size. <code>scale</code> &lt; 1 will generally also give you a <em>larger plot area</em> and <em>more space between your geoms</em>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="fine-tuning-publication-quality-ggplots.html#cb169-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-svg-7x4.svg&quot;</span>, goal_plot,</span>
<span id="cb169-2"><a href="fine-tuning-publication-quality-ggplots.html#cb169-2" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">7</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb169-3"><a href="fine-tuning-publication-quality-ggplots.html#cb169-3" tabindex="-1"></a></span>
<span id="cb169-4"><a href="fine-tuning-publication-quality-ggplots.html#cb169-4" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-svg-14x8.svg&quot;</span>, goal_plot,</span>
<span id="cb169-5"><a href="fine-tuning-publication-quality-ggplots.html#cb169-5" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">14</span>, <span class="at">height =</span> <span class="dv">8</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>)</span>
<span id="cb169-6"><a href="fine-tuning-publication-quality-ggplots.html#cb169-6" tabindex="-1"></a></span>
<span id="cb169-7"><a href="fine-tuning-publication-quality-ggplots.html#cb169-7" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-svg-14x8-rescale.svg&quot;</span>, goal_plot,</span>
<span id="cb169-8"><a href="fine-tuning-publication-quality-ggplots.html#cb169-8" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">14</span>, <span class="at">height =</span> <span class="dv">8</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">scale =</span> .<span class="dv">5</span>)</span></code></pre></div>
<p>The 7x4” vector plot:</p>
<p><img src="img/penalty-lift-svg-7x4.svg" width="672px" style="display: block; margin: auto;" /></p>
<p>The same plot saved at 14x8”:</p>
<p><img src="img/penalty-lift-svg-14x8.svg" width="672px" style="display: block; margin: auto;" /></p>
<p>A 14.8” plot with <code>scale = 0.5</code>:</p>
<p><img src="img/penalty-lift-svg-14x8-rescale.svg" width="672px" style="display: block; margin: auto;" /></p>
<p>All of these <code>.svg</code> images are <em>displayed</em> at 7x4” on your screen, but the plot we made with <code>width = 14, height = 8</code> has smaller text and larger plotting areas unless we correct this with <code>scale</code>. <code>penalty-lift-svg-7x4.svg</code> and <code>penalty-lift-svg-14x8-rescale.svg</code> are actually identical files.</p>
<p>You should <em>avoid using <code>scale</code> for rasters</em>, as it will create plots that will not print at the size (<code>width</code> and <code>height</code>) and resolution (<code>dpi</code>) you specified.</p>
</div>
<div id="image-sizes-and-raster-resolutions" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Image Sizes and Raster Resolutions<a href="fine-tuning-publication-quality-ggplots.html#image-sizes-and-raster-resolutions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All raster images are made up of grids of dots or pixels. Once you export a figure from <code>R</code> as a <code>.png</code>, <code>.jpeg</code>, or other raster format, <em>you cannot resize it</em>. It will look blurry or blocky if you try to make it bigger, and even slight changes to the <strong>aspect ratio</strong> (<span class="math inline">\(width/height\)</span>), the text and other plot elements will be noticeably stretched out.</p>
<p>You’ll have fewer problems if you save an image that’s way too big (i.e., has too many pixels) for what you need, so long as it’s the right aspect ratio and all the plot elements have relative sizes that work at the scale you’ll be printing. (See <a href="https://sscc.wisc.edu/sscc/pubs/using-r-plots/saving-plots.html#file-dimensions">this short primer on “Using <code>R</code> Plots in Documents” from the University of Wisconsin-Madison</a> for examples.)</p>
<p>So, how big is a pixel? How many pixels are in an inch? It depends! (On the pixel density for screens and the resolution for printing, see <a href="https://graphicdesign.stackexchange.com/questions/6080/what-is-the-difference-between-dpi-dots-per-inch-and-ppi-pixels-per-inch">the discussion on this page</a> for details.)</p>
<ul>
<li>Most modern computer monitors have something like 90-120 pixels per inch (ppi)</li>
<li>Microsoft Powerpoint uses an internal resolution of 96 ppi as a default, <a href="https://www.brightcarbon.com/blog/powerpoint-picture-size-and-resolution/">although images will print at more than 96 dpi if they’re sized appropriately</a>.</li>
<li>Older Apple software has a default of 72 ppi</li>
<li><code>ggsave()</code> uses a default of 300 dpi</li>
<li>Poster printers will usually print at 300 dots per inch (dpi). They may ask for a minimum resolution of anywhere between 120-300 dpi, although 300 dpi will usually be a safe bet. Use your specific printer’s recommendations.</li>
<li>Elsevier journals like <em>Food Quality and Preference</em> <a href="https://www.elsevier.com/about/policies-and-standards/author/artwork-and-media-instructions/artwork-sizing">suggest at least 300 dpi for all images and at least 500 dpi for “combination art”, which includes all <code>R</code> plots with colored or shaded areas</a>.</li>
</ul>
<p>This is important because, if you have a 600x600-pixel raster image, and you try to print it any bigger than 2 inches x 2 inches on a 300 dpi printer, then you have <em>missing image data</em> and the printed version will look blurry.</p>
<p>Whenever something, like a design software or an <code>R</code> function to save a plot, gives you the chance to enter an image size in inches or centimeters, <em>you should figure out what dpi or ppi it’s using</em>. It may be easier to figure out the final pixel size you want and export something that size or bigger. (For more details, see <a href="https://apps.lib.umich.edu/files/services/exploratory/pdfs/preparingimages.pdf">this guide on “Preparing Images for PowerPoint, the Web, and Publication” from the University of Michigan</a>. It’s slightly outdated, so ignore the specific dpi/ppi numbers.)</p>
<p>You can see the possible image widths and corresponding pixel sizes for Elsevier journals <a href="https://www.elsevier.com/about/policies-and-standards/author/artwork-and-media-instructions/artwork-sizing">here</a>. For PowerPoint presentations, assume you’re filling a 13.3x7.5” space at 150 dpi. For printed posters, you’ll find the final poster size on the competition guidelines and the final resolution from your printer. 12”x12” for a single figure at 300 dpi is a good place to start.</p>
<p>You <em>will</em> almost certainly have to re-export your figures several times in order to get the sizing and aspect ratios right.</p>
<p>Let’s save a the same plots as a raster image (<code>.png</code>) with a few different <code>dpi</code> values.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="fine-tuning-publication-quality-ggplots.html#cb170-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-png-50dpi.png&quot;</span>, goal_plot,</span>
<span id="cb170-2"><a href="fine-tuning-publication-quality-ggplots.html#cb170-2" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">7</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">dpi =</span> <span class="dv">50</span>)</span>
<span id="cb170-3"><a href="fine-tuning-publication-quality-ggplots.html#cb170-3" tabindex="-1"></a></span>
<span id="cb170-4"><a href="fine-tuning-publication-quality-ggplots.html#cb170-4" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-png-300dpi.png&quot;</span>, goal_plot,</span>
<span id="cb170-5"><a href="fine-tuning-publication-quality-ggplots.html#cb170-5" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">7</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>) <span class="co">#default dpi = 300</span></span>
<span id="cb170-6"><a href="fine-tuning-publication-quality-ggplots.html#cb170-6" tabindex="-1"></a></span>
<span id="cb170-7"><a href="fine-tuning-publication-quality-ggplots.html#cb170-7" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;img/penalty-lift-png-500dpi.png&quot;</span>, goal_plot,</span>
<span id="cb170-8"><a href="fine-tuning-publication-quality-ggplots.html#cb170-8" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">7</span>, <span class="at">height =</span> <span class="dv">4</span>, <span class="at">units =</span> <span class="st">&quot;in&quot;</span>, <span class="at">dpi =</span> <span class="dv">500</span>)</span></code></pre></div>
<p>7x4” at 50 dpi:</p>
<p><img src="img/penalty-lift-png-50dpi.png" width="672px" style="display: block; margin: auto;" /></p>
<p>7x4” at 300 dpi (the <code>ggsave()</code> default):</p>
<p><img src="img/penalty-lift-png-300dpi.png" width="672px" style="display: block; margin: auto;" /></p>
<p>7x4” at 500 dpi:</p>
<p><img src="img/penalty-lift-png-500dpi.png" width="672px" style="display: block; margin: auto;" /></p>
<p>You can see that all of the 7x4” raster plots look basically the same, except the first one is a little blurry when it’s sized up to match the other two on your probably ~100 dpi monitor. This is the problem we’re trying to avoid.</p>
<p>Unlike <code>scale</code>, the <code>dpi</code> argument does not resize any of the text or geoms (it doesn’t change the size of a “point” from 1/72”). But let’s say we need a 300 dpi copy of this image printed at 14x8”. We already know that the 14x8” output has text that’s too small to read from afar.</p>
<p>In cases like these, it may be easier to output a size with the right <em>aspect ratio</em> that looks good and is legible, then figure out what <code>dpi</code> you’ll need to print it. If we need a 14x8” plot at 300 dpi, that’s <span class="math inline">\(14 \times 300 = 4200\)</span> pixels wide by <span class="math inline">\(8 \times 300 = 2400\)</span> tall. We can fake this with our 7x4” plot at 600 dpi, since <span class="math inline">\(4200 / 7 = 600\)</span> and <span class="math inline">\(2400 / 4 = 600\)</span>.</p>
</div>
<div id="other-image-export-options" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Other Image Export Options<a href="fine-tuning-publication-quality-ggplots.html#other-image-export-options" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is not a <code>knitr</code> or <code>bookdown</code> tutorial, because we had to choose our topics, but we used the <code>bookdown</code> package to make the <a href="https://lhami.github.io/sensometrics-r-tutorial-2024/">online webpage version of this tutorial</a>. It comes with its own advantages and challenges, but it does significantly streamline the image-generation process for any project where the only file you need is one LaTeX file, <code>.html</code> page, or <code>.pdf</code> output with all of the text and all of the figures. If that sounds appealing to you, turn your attention to <a href="https://bookdown.org/yihui/bookdown/">“bookdown: Authoring Books and Technical Documents with <code>R</code> Markdown” by Yihui Xie</a>.</p>
</div>
</div>
<div id="making-text-look-okay" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Making Text Look Okay<a href="fine-tuning-publication-quality-ggplots.html#making-text-look-okay" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A good <code>R</code> variable or column name doesn’t have any spaces or punctuation other than underscores (<code>_</code>) and dots (<code>.</code>), to avoid all those pesky backticks (```) in our code.</p>
<p>This is very different from what a good label in a plot looks like. You’ll often want to make some sort of mass changes to column names or text variables before plotting, in order to address this. In our previous example, we used <code>separate()</code> to split one messy column with variable names into two, adjusted each one, and then used <code>unite()</code> to combine them again:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="fine-tuning-publication-quality-ggplots.html#cb171-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a href="fine-tuning-publication-quality-ggplots.html#cb171-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb171-3"><a href="fine-tuning-publication-quality-ggplots.html#cb171-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb171-4"><a href="fine-tuning-publication-quality-ggplots.html#cb171-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb171-5"><a href="fine-tuning-publication-quality-ggplots.html#cb171-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb171-6"><a href="fine-tuning-publication-quality-ggplots.html#cb171-6" tabindex="-1"></a>  <span class="fu">separate</span>(cata_variable, </span>
<span id="cb171-7"><a href="fine-tuning-publication-quality-ggplots.html#cb171-7" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;mode&quot;</span>, <span class="st">&quot;variable&quot;</span>), </span>
<span id="cb171-8"><a href="fine-tuning-publication-quality-ggplots.html#cb171-8" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb171-9"><a href="fine-tuning-publication-quality-ggplots.html#cb171-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">penalty_lift =</span> checked_1 <span class="sc">-</span> checked_0,</span>
<span id="cb171-10"><a href="fine-tuning-publication-quality-ggplots.html#cb171-10" tabindex="-1"></a>         <span class="at">mode =</span> <span class="fu">case_when</span>(mode <span class="sc">==</span> <span class="st">&quot;taste&quot;</span> <span class="sc">~</span> <span class="st">&quot;(T)&quot;</span>,</span>
<span id="cb171-11"><a href="fine-tuning-publication-quality-ggplots.html#cb171-11" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearance&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>,</span>
<span id="cb171-12"><a href="fine-tuning-publication-quality-ggplots.html#cb171-12" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearane&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb171-13"><a href="fine-tuning-publication-quality-ggplots.html#cb171-13" tabindex="-1"></a>  <span class="fu">unite</span>(variable, mode, <span class="at">col =</span> <span class="st">&quot;cata_variable&quot;</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 85 × 5
##    berry      cata_variable   checked_0 checked_1 penalty_lift
##    &lt;chr&gt;      &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
##  1 blackberry fresh (A)            4.70      5.80        1.10 
##  2 blackberry goodcolor (A)        4.63      5.77        1.14 
##  3 blackberry goodquality (A)      4.69      5.96        1.26 
##  4 blackberry goodshapre (A)       4.93      5.86        0.923
##  5 blackberry misshapen (A)        5.63      4.92       -0.708
##  6 blackberry none (A)             5.42      4.78       -0.641
##  7 blackberry notfresh (A)         5.57      3.76       -1.81 
##  8 blackberry unevencolor (A)      5.53      4.53       -0.998
##  9 blackberry bruised (A)          5.53      4.67       -0.861
## 10 blackberry berry (T)            4.21      6.49        2.27 
## # ℹ 75 more rows</code></pre>
<div id="powerful-text-manipulation-with-stringr" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Powerful Text Manipulation with <code>stringr</code><a href="fine-tuning-publication-quality-ggplots.html#powerful-text-manipulation-with-stringr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>stringr</code> package is a part of the <code>tidyverse</code>, so you have it already loaded whenever you run <code>library(tidyverse)</code>. It has a lot of useful functions for working with text (called “<strong>str</strong>ings” in many programming languages), mostly of the form <code>str_*()</code>. One thing you can do is change labels to uppercase, lowercase, or “title case” (first letter of each word capitalized), as appropriate:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="fine-tuning-publication-quality-ggplots.html#cb173-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb173-2"><a href="fine-tuning-publication-quality-ggplots.html#cb173-2" tabindex="-1"></a>  <span class="fu">select</span>(berry) <span class="sc">%&gt;%</span></span>
<span id="cb173-3"><a href="fine-tuning-publication-quality-ggplots.html#cb173-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Upper =</span> <span class="fu">str_to_upper</span>(berry),</span>
<span id="cb173-4"><a href="fine-tuning-publication-quality-ggplots.html#cb173-4" tabindex="-1"></a>         <span class="at">Title =</span> <span class="fu">str_to_title</span>(berry)) <span class="co"># Capitalizes the first letter of each word</span></span></code></pre></div>
<pre><code>## # A tibble: 170 × 3
##    berry      Upper      Title     
##    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     
##  1 blackberry BLACKBERRY Blackberry
##  2 blackberry BLACKBERRY Blackberry
##  3 blackberry BLACKBERRY Blackberry
##  4 blackberry BLACKBERRY Blackberry
##  5 blackberry BLACKBERRY Blackberry
##  6 blackberry BLACKBERRY Blackberry
##  7 blackberry BLACKBERRY Blackberry
##  8 blackberry BLACKBERRY Blackberry
##  9 blackberry BLACKBERRY Blackberry
## 10 blackberry BLACKBERRY Blackberry
## # ℹ 160 more rows</code></pre>
<p>It also has its own version of <code>unite()</code> called <code>str_c()</code>, although it works on vectors (e.g., inside <code>mutate()</code>) rather than on whole tables like a <code>dplyr</code> verb.</p>
<p>On the other hand, if you don’t need to do the intermediate step of changing the <code>separate()</code>d parts, <code>str_replace()</code> and <code>str_replace_all()</code> are very useful for dealing with underscores or periods. You give it <code>string</code>, the text vector you want to modify (inside <code>mutate()</code>, a column name); then <code>pattern</code>, the character(s) you want to replace; then <code>replacement</code>, what you want to replace them with.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="fine-tuning-publication-quality-ggplots.html#cb175-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb175-2"><a href="fine-tuning-publication-quality-ggplots.html#cb175-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb175-3"><a href="fine-tuning-publication-quality-ggplots.html#cb175-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb175-4"><a href="fine-tuning-publication-quality-ggplots.html#cb175-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb175-5"><a href="fine-tuning-publication-quality-ggplots.html#cb175-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb175-6"><a href="fine-tuning-publication-quality-ggplots.html#cb175-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">str_replace_all</span>(cata_variable, <span class="st">&quot;_&quot;</span>, <span class="st">&quot;: &quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 85 × 4
##    berry      cata_variable           checked_0 checked_1
##    &lt;chr&gt;      &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;
##  1 blackberry appearance: fresh            4.70      5.80
##  2 blackberry appearance: goodcolor        4.63      5.77
##  3 blackberry appearance: goodquality      4.69      5.96
##  4 blackberry appearance: goodshapre       4.93      5.86
##  5 blackberry appearance: misshapen        5.63      4.92
##  6 blackberry appearance: none             5.42      4.78
##  7 blackberry appearance: notfresh         5.57      3.76
##  8 blackberry appearance: unevencolor      5.53      4.53
##  9 blackberry appearane: bruised           5.53      4.67
## 10 blackberry taste: berry                 4.21      6.49
## # ℹ 75 more rows</code></pre>
<p>They can both be as long as you like. If <code>pattern = _</code> and there’s more than one <code>_</code> in one of the <code>string</code>s, <code>str_replace()</code> will only replace the first one and <code>str_replace_all()</code> will replace them all.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="fine-tuning-publication-quality-ggplots.html#cb177-1" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">&quot;long_text_with_many_underscores&quot;</span>, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;long text_with_many_underscores&quot;</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="fine-tuning-publication-quality-ggplots.html#cb179-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="st">&quot;long_text_with_many_underscores&quot;</span>, <span class="st">&quot;_&quot;</span>, <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;long text with many underscores&quot;</code></pre>
<p>You can add multiple sets of <code>pattern</code>s and <code>replace</code>ments to <code>str_replace_all()</code> using a named list: <code>c("pattern1" = "replace1", "pattern2" = "replace2"</code>. This is useful to, for instance, fix multiple typos like “goodshapre”. Unlike the <code>case_when()</code> example we showed before, you can fix typos that occur anywhere in the text, even if they’re only parts of a word.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="fine-tuning-publication-quality-ggplots.html#cb181-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="fine-tuning-publication-quality-ggplots.html#cb181-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb181-3"><a href="fine-tuning-publication-quality-ggplots.html#cb181-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb181-4"><a href="fine-tuning-publication-quality-ggplots.html#cb181-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb181-5"><a href="fine-tuning-publication-quality-ggplots.html#cb181-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-6"><a href="fine-tuning-publication-quality-ggplots.html#cb181-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">str_replace_all</span>(cata_variable,</span>
<span id="cb181-7"><a href="fine-tuning-publication-quality-ggplots.html#cb181-7" tabindex="-1"></a>                                         <span class="fu">c</span>(<span class="st">&quot;shapre&quot;</span> <span class="ot">=</span> <span class="st">&quot;shape&quot;</span>,</span>
<span id="cb181-8"><a href="fine-tuning-publication-quality-ggplots.html#cb181-8" tabindex="-1"></a>                                           <span class="st">&quot;appearane&quot;</span> <span class="ot">=</span> <span class="st">&quot;appearance&quot;</span>,</span>
<span id="cb181-9"><a href="fine-tuning-publication-quality-ggplots.html#cb181-9" tabindex="-1"></a>                                           <span class="st">&quot;_&quot;</span> <span class="ot">=</span> <span class="st">&quot; &quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 85 × 4
##    berry      cata_variable          checked_0 checked_1
##    &lt;chr&gt;      &lt;chr&gt;                      &lt;dbl&gt;     &lt;dbl&gt;
##  1 blackberry appearance fresh            4.70      5.80
##  2 blackberry appearance goodcolor        4.63      5.77
##  3 blackberry appearance goodquality      4.69      5.96
##  4 blackberry appearance goodshape        4.93      5.86
##  5 blackberry appearance misshapen        5.63      4.92
##  6 blackberry appearance none             5.42      4.78
##  7 blackberry appearance notfresh         5.57      3.76
##  8 blackberry appearance unevencolor      5.53      4.53
##  9 blackberry appearance bruised          5.53      4.67
## 10 blackberry taste berry                 4.21      6.49
## # ℹ 75 more rows</code></pre>
<p>Be careful using short <code>pattern</code>s, because they will replace every example <em>even if it’s only part of a word</em>.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="fine-tuning-publication-quality-ggplots.html#cb183-1" tabindex="-1"></a><span class="co">#This can lead to unintentional side-effects</span></span>
<span id="cb183-2"><a href="fine-tuning-publication-quality-ggplots.html#cb183-2" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;nocolor&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;cornonthecob&quot;</span>, <span class="st">&quot;anode&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb183-3"><a href="fine-tuning-publication-quality-ggplots.html#cb183-3" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">&quot;no&quot;</span>, <span class="st">&quot; NO &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; NO color&quot;      &quot; NO ne&quot;         &quot;cor NO nthecob&quot; &quot;a NO de&quot;</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="fine-tuning-publication-quality-ggplots.html#cb185-1" tabindex="-1"></a><span class="co">#Or it can be useful for fixing lots of similar problems all at once</span></span>
<span id="cb185-2"><a href="fine-tuning-publication-quality-ggplots.html#cb185-2" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb185-3"><a href="fine-tuning-publication-quality-ggplots.html#cb185-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb185-4"><a href="fine-tuning-publication-quality-ggplots.html#cb185-4" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb185-5"><a href="fine-tuning-publication-quality-ggplots.html#cb185-5" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb185-6"><a href="fine-tuning-publication-quality-ggplots.html#cb185-6" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb185-7"><a href="fine-tuning-publication-quality-ggplots.html#cb185-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">str_replace_all</span>(cata_variable,</span>
<span id="cb185-8"><a href="fine-tuning-publication-quality-ggplots.html#cb185-8" tabindex="-1"></a>                                         <span class="fu">c</span>(<span class="st">&quot;not&quot;</span> <span class="ot">=</span> <span class="st">&quot;not &quot;</span>,</span>
<span id="cb185-9"><a href="fine-tuning-publication-quality-ggplots.html#cb185-9" tabindex="-1"></a>                                           <span class="st">&quot;good&quot;</span> <span class="ot">=</span> <span class="st">&quot;good &quot;</span>,</span>
<span id="cb185-10"><a href="fine-tuning-publication-quality-ggplots.html#cb185-10" tabindex="-1"></a>                                           <span class="st">&quot;uneven&quot;</span> <span class="ot">=</span> <span class="st">&quot;uneven &quot;</span>,</span>
<span id="cb185-11"><a href="fine-tuning-publication-quality-ggplots.html#cb185-11" tabindex="-1"></a>                                           <span class="st">&quot;_&quot;</span> <span class="ot">=</span> <span class="st">&quot; &quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 85 × 4
##    berry      cata_variable           checked_0 checked_1
##    &lt;chr&gt;      &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;
##  1 blackberry appearance fresh             4.70      5.80
##  2 blackberry appearance good color        4.63      5.77
##  3 blackberry appearance good quality      4.69      5.96
##  4 blackberry appearance good shapre       4.93      5.86
##  5 blackberry appearance misshapen         5.63      4.92
##  6 blackberry appearance none              5.42      4.78
##  7 blackberry appearance not fresh         5.57      3.76
##  8 blackberry appearance uneven color      5.53      4.53
##  9 blackberry appearane bruised            5.53      4.67
## 10 blackberry taste berry                  4.21      6.49
## # ℹ 75 more rows</code></pre>
</div>
<div id="stringr-and-regular-expressions-a-small-tangent" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> <code>stringr</code> and Regular Expressions (A small tangent)<a href="fine-tuning-publication-quality-ggplots.html#stringr-and-regular-expressions-a-small-tangent" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far, we’ve been replacing letters and underscores, which is what we have in our example data. You can also use <code>str_replace()</code> for periods (<code>.</code>), although you may be surprised when you first try:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="fine-tuning-publication-quality-ggplots.html#cb187-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="st">&quot;long.text.with.many.periods&quot;</span>, <span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="co"># Replaces everything</span></span></code></pre></div>
<pre><code>## [1] &quot;                           &quot;</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="fine-tuning-publication-quality-ggplots.html#cb189-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="st">&quot;long.text.with.many.periods&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="co"># Replaces only dots</span></span></code></pre></div>
<pre><code>## [1] &quot;long text with many periods&quot;</code></pre>
<p>We have to <strong>escape</strong> the period (with an escaped backslash, actually, but for now just know that the two backslashes <code>\\</code> are the <code>stringr</code> escape sequence), because the <code>str_*</code> functions with a <code>pattern</code> can use <strong>Regular Expressions</strong> (or regex). Regex are extremely powerful tools for finding patterns in text, similar to the intuitive ways a human might recognize something like an email address, a measurement, or a parenthetical.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="fine-tuning-publication-quality-ggplots.html#cb191-1" tabindex="-1"></a><span class="fu">str_extract</span>(<span class="st">&quot;If you want to get in touch with me you can do so at lhamilton@vsu.edu.&quot;</span>,</span>
<span id="cb191-2"><a href="fine-tuning-publication-quality-ggplots.html#cb191-2" tabindex="-1"></a>            <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w*@</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">.(edu|gov|com|org|biz|net|fr|co</span><span class="sc">\\</span><span class="st">.uk)</span><span class="sc">\\</span><span class="st">b&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;lhamilton@vsu.edu&quot;</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="fine-tuning-publication-quality-ggplots.html#cb193-1" tabindex="-1"></a><span class="fu">str_extract_all</span>(<span class="st">&quot;Our 300th measurement was 10.31 cm, our 301st clocked in at 3.213in&quot;</span>,</span>
<span id="cb193-2"><a href="fine-tuning-publication-quality-ggplots.html#cb193-2" tabindex="-1"></a>            <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+ ?(cm|in|m)&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;10.31 cm&quot; &quot;3.213in&quot;</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="fine-tuning-publication-quality-ggplots.html#cb195-1" tabindex="-1"></a><span class="fu">str_extract_all</span>(<span class="st">&quot;Regular Expressions (regex) are one tool in Natural Language Processing (NLP)&quot;</span>,</span>
<span id="cb195-2"><a href="fine-tuning-publication-quality-ggplots.html#cb195-2" tabindex="-1"></a>            <span class="st">&quot;(?&lt;=</span><span class="sc">\\</span><span class="st">()[^)]*(?=</span><span class="sc">\\</span><span class="st">))&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;regex&quot; &quot;NLP&quot;</code></pre>
<p>You can try changing the searched <code>string</code> in the above code to see if it recognizes your email or how many numbers you can get it to recognize. Usually, though, your plot labels aren’t in full sentences in your data frame. Simpler regular expressions can still save you a lot of work:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="fine-tuning-publication-quality-ggplots.html#cb197-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb197-2"><a href="fine-tuning-publication-quality-ggplots.html#cb197-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb197-3"><a href="fine-tuning-publication-quality-ggplots.html#cb197-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb197-4"><a href="fine-tuning-publication-quality-ggplots.html#cb197-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb197-5"><a href="fine-tuning-publication-quality-ggplots.html#cb197-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb197-6"><a href="fine-tuning-publication-quality-ggplots.html#cb197-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">str_replace</span>(cata_variable,</span>
<span id="cb197-7"><a href="fine-tuning-publication-quality-ggplots.html#cb197-7" tabindex="-1"></a>                                     <span class="st">&quot;^(.).*_(.*)&quot;</span>,</span>
<span id="cb197-8"><a href="fine-tuning-publication-quality-ggplots.html#cb197-8" tabindex="-1"></a>                                     <span class="st">&quot;</span><span class="sc">\\</span><span class="st">2 (</span><span class="sc">\\</span><span class="st">1)&quot;</span>),</span>
<span id="cb197-9"><a href="fine-tuning-publication-quality-ggplots.html#cb197-9" tabindex="-1"></a>         <span class="at">cata_variable =</span> <span class="fu">str_to_title</span>(cata_variable))</span></code></pre></div>
<pre><code>## # A tibble: 85 × 4
##    berry      cata_variable   checked_0 checked_1
##    &lt;chr&gt;      &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;
##  1 blackberry Fresh (A)            4.70      5.80
##  2 blackberry Goodcolor (A)        4.63      5.77
##  3 blackberry Goodquality (A)      4.69      5.96
##  4 blackberry Goodshapre (A)       4.93      5.86
##  5 blackberry Misshapen (A)        5.63      4.92
##  6 blackberry None (A)             5.42      4.78
##  7 blackberry Notfresh (A)         5.57      3.76
##  8 blackberry Unevencolor (A)      5.53      4.53
##  9 blackberry Bruised (A)          5.53      4.67
## 10 blackberry Berry (T)            4.21      6.49
## # ℹ 75 more rows</code></pre>
<p>You do not <em>have</em> to learn regular expressions to clean up messy text, but being comfortable with them will (eventually) make you faster. You should at least learn the characters (<code>\</code>, <code>.</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code>, <code>(</code>, <code>)</code>, <code>&lt;</code>, <code>&gt;</code>, <code>*</code>, <code>+</code>, <code>-</code>, <code>=</code>, <code>!</code>, <code>?</code>, <code>^</code>, <code>$</code>, and <code>|</code>) that will need to be <strong>escaped</strong> with two backslashes if you need to replace them. It will help you troubleshoot any weird results you get from the <code>str_*()</code> functions.</p>
<p>If you want to learn more, we’d recommend starting with <a href="https://stringr.tidyverse.org/articles/regular-expressions.html">the <code>stringr</code> package’s own vignette on regular expressions</a>, which you can view with <code>vignette("regular-expressions", "stringr")</code>. If you want more practice, you can then follow along with the <a href="https://regexone.com/">RegexOne</a> tutorial or <a href="http://regextutorials.com/index.html">RegexTutorials</a>.</p>
<p>Any “perl-flavored” regex tutorial or resource will work, with the exception that <em>you will have to double the number of backslashes (<code>\</code>)</em> to use them in <code>R</code>.</p>
</div>
</div>
<div id="removing-legends-and-plot-elements" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Removing Legends and Plot Elements<a href="fine-tuning-publication-quality-ggplots.html#removing-legends-and-plot-elements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You’ve already seen us use <code>+ theme(panel.grid = element_blank())</code> to get rid of the grid lines in a plot. You can use <code>element_blank()</code> to get rid of lots of plot elements you might not want for whatever reason, usually because it’s redundant with information you have elsewhere and thus just making the plot look more complicated or harder to read at a glance. The most common things you might want to remove are:</p>
<ul>
<li><code>plot.title</code>, if some function added a title to the top of your plot and you want to get rid of it.</li>
<li><code>axis.title</code>, <code>axis.title.x</code>, or <code>axis.title.y</code> if you don’t need the column name(s) labeling your axes</li>
<li><code>axis.ticks</code>, <code>axis.ticks.x</code>, or <code>axis.ticks.y</code> if you want to remove the little tick marks along a given axis (useful for bar plots)</li>
</ul>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="fine-tuning-publication-quality-ggplots.html#cb199-1" tabindex="-1"></a>berry_long_liking <span class="sc">%&gt;%</span></span>
<span id="cb199-2"><a href="fine-tuning-publication-quality-ggplots.html#cb199-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Scale, <span class="at">y =</span> Liking, <span class="at">color =</span> Scale)) <span class="sc">+</span></span>
<span id="cb199-3"><a href="fine-tuning-publication-quality-ggplots.html#cb199-3" tabindex="-1"></a>  ggbeeswarm<span class="sc">::</span><span class="fu">geom_quasirandom</span>() <span class="sc">+</span></span>
<span id="cb199-4"><a href="fine-tuning-publication-quality-ggplots.html#cb199-4" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Attribute) <span class="sc">+</span></span>
<span id="cb199-5"><a href="fine-tuning-publication-quality-ggplots.html#cb199-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb199-6"><a href="fine-tuning-publication-quality-ggplots.html#cb199-6" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb199-7"><a href="fine-tuning-publication-quality-ggplots.html#cb199-7" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb199-8"><a href="fine-tuning-publication-quality-ggplots.html#cb199-8" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/removing%20the%20legend%20and%20the%20axis%20ticks-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>You can see a nearly-full list of the arguments to <code>ggplot2::theme()</code> in the theme help files (<code>?theme</code>), unlike with <code>ggplot2</code> aesthetics and the <code>geom_*()</code> help files.</p>
<p>If you want to remove the legend, you use <code>+ theme(legend.position = "none")</code>, but if you want to remove <em>specific geoms</em> from the legend, then you have to adjust your <code>geom_*()</code> calls.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="fine-tuning-publication-quality-ggplots.html#cb200-1" tabindex="-1"></a>ca_cider<span class="sc">$</span>col<span class="sc">$</span>coord <span class="sc">%&gt;%</span></span>
<span id="cb200-2"><a href="fine-tuning-publication-quality-ggplots.html#cb200-2" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">&quot;Attribute&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb200-3"><a href="fine-tuning-publication-quality-ggplots.html#cb200-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Modality =</span> <span class="fu">case_when</span>(Attribute <span class="sc">==</span> <span class="st">&quot;Sweet&quot;</span> <span class="sc">~</span> <span class="st">&quot;Taste&quot;</span>,</span>
<span id="cb200-4"><a href="fine-tuning-publication-quality-ggplots.html#cb200-4" tabindex="-1"></a>                              Attribute <span class="sc">==</span> <span class="st">&quot;Bitter&quot;</span> <span class="sc">~</span> <span class="st">&quot;Taste&quot;</span>,</span>
<span id="cb200-5"><a href="fine-tuning-publication-quality-ggplots.html#cb200-5" tabindex="-1"></a>                              Attribute <span class="sc">==</span> <span class="st">&quot;Sour&quot;</span> <span class="sc">~</span> <span class="st">&quot;Taste&quot;</span>,</span>
<span id="cb200-6"><a href="fine-tuning-publication-quality-ggplots.html#cb200-6" tabindex="-1"></a>                              Attribute <span class="sc">==</span> <span class="st">&quot;Smooth&quot;</span> <span class="sc">~</span> <span class="st">&quot;Mouthfeel&quot;</span>,</span>
<span id="cb200-7"><a href="fine-tuning-publication-quality-ggplots.html#cb200-7" tabindex="-1"></a>                              Attribute <span class="sc">==</span> <span class="st">&quot;Dry&quot;</span> <span class="sc">~</span> <span class="st">&quot;Mouthfeel&quot;</span>,</span>
<span id="cb200-8"><a href="fine-tuning-publication-quality-ggplots.html#cb200-8" tabindex="-1"></a>                              Attribute <span class="sc">==</span> <span class="st">&quot;FullBodied&quot;</span> <span class="sc">~</span> <span class="st">&quot;Mouthfeel&quot;</span>,</span>
<span id="cb200-9"><a href="fine-tuning-publication-quality-ggplots.html#cb200-9" tabindex="-1"></a>                              <span class="at">.default =</span> <span class="st">&quot;Aroma&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb200-10"><a href="fine-tuning-publication-quality-ggplots.html#cb200-10" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Dim 1</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Dim 2</span><span class="st">`</span>,</span>
<span id="cb200-11"><a href="fine-tuning-publication-quality-ggplots.html#cb200-11" tabindex="-1"></a>             <span class="at">label =</span> Attribute, <span class="at">color =</span> Modality)) <span class="ot">-&gt;</span> ca_cider_colored</span>
<span id="cb200-12"><a href="fine-tuning-publication-quality-ggplots.html#cb200-12" tabindex="-1"></a></span>
<span id="cb200-13"><a href="fine-tuning-publication-quality-ggplots.html#cb200-13" tabindex="-1"></a>ca_cider_colored <span class="sc">+</span></span>
<span id="cb200-14"><a href="fine-tuning-publication-quality-ggplots.html#cb200-14" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb200-15"><a href="fine-tuning-publication-quality-ggplots.html#cb200-15" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>()</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/excluding%20geoms%20from%20the%20legend-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="fine-tuning-publication-quality-ggplots.html#cb201-1" tabindex="-1"></a>ca_cider_colored <span class="sc">+</span></span>
<span id="cb201-2"><a href="fine-tuning-publication-quality-ggplots.html#cb201-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb201-3"><a href="fine-tuning-publication-quality-ggplots.html#cb201-3" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/excluding%20geoms%20from%20the%20legend-2.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="ordered-categorical-variables" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Ordered Categorical Variables<a href="fine-tuning-publication-quality-ggplots.html#ordered-categorical-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many of the figures we’ve made so far have had one axis with a categorical variable. Have you figured out how <code>ggplot2</code> orders the levels of categorical variables? If you have noticed, it’s likely because it’s in a different order than the one we’d like.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="fine-tuning-publication-quality-ggplots.html#cb202-1" tabindex="-1"></a>long_cider_data <span class="sc">%&gt;%</span></span>
<span id="cb202-2"><a href="fine-tuning-publication-quality-ggplots.html#cb202-2" tabindex="-1"></a>  <span class="fu">filter</span>(checked <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb202-3"><a href="fine-tuning-publication-quality-ggplots.html#cb202-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cata_variable)) <span class="sc">+</span></span>
<span id="cb202-4"><a href="fine-tuning-publication-quality-ggplots.html#cb202-4" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb202-5"><a href="fine-tuning-publication-quality-ggplots.html#cb202-5" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb202-6"><a href="fine-tuning-publication-quality-ggplots.html#cb202-6" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Temperature), <span class="fu">vars</span>(Sample_Name))</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/default%20categorical%20axis%20in%20ggplot2-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The CATA attributes are in alphabetical order. This is how <code>ggplot2</code> treats all <code>character</code> variables, and you can exert some control over the ordering by turning the variable into an ordered <code>factor</code>.</p>
<div id="specifying-ordinal-variables-as-factors" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Specifying Ordinal Variables as Factors<a href="fine-tuning-publication-quality-ggplots.html#specifying-ordinal-variables-as-factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can order variables by hand, if there’s a particular order you have in mind:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="fine-tuning-publication-quality-ggplots.html#cb203-1" tabindex="-1"></a>long_cider_data <span class="sc">%&gt;%</span></span>
<span id="cb203-2"><a href="fine-tuning-publication-quality-ggplots.html#cb203-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">factor</span>(cata_variable,</span>
<span id="cb203-3"><a href="fine-tuning-publication-quality-ggplots.html#cb203-3" tabindex="-1"></a>                                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Sweet&quot;</span>, <span class="st">&quot;Sour&quot;</span>, <span class="st">&quot;Bitter&quot;</span>,</span>
<span id="cb203-4"><a href="fine-tuning-publication-quality-ggplots.html#cb203-4" tabindex="-1"></a>                                           <span class="st">&quot;Smooth&quot;</span>, <span class="st">&quot;Dry&quot;</span>, <span class="st">&quot;FullBodied&quot;</span>,</span>
<span id="cb203-5"><a href="fine-tuning-publication-quality-ggplots.html#cb203-5" tabindex="-1"></a>                                           <span class="st">&quot;Light&quot;</span>,</span>
<span id="cb203-6"><a href="fine-tuning-publication-quality-ggplots.html#cb203-6" tabindex="-1"></a>                                           <span class="st">&quot;Fruity&quot;</span>, <span class="st">&quot;Berries&quot;</span>, <span class="st">&quot;Fresh_Apples&quot;</span>,</span>
<span id="cb203-7"><a href="fine-tuning-publication-quality-ggplots.html#cb203-7" tabindex="-1"></a>                                           <span class="st">&quot;Floral&quot;</span>, <span class="st">&quot;Spice&quot;</span>,</span>
<span id="cb203-8"><a href="fine-tuning-publication-quality-ggplots.html#cb203-8" tabindex="-1"></a>                                           <span class="st">&quot;Herbal&quot;</span>, <span class="st">&quot;Woody&quot;</span>, <span class="st">&quot;Earthy&quot;</span>,</span>
<span id="cb203-9"><a href="fine-tuning-publication-quality-ggplots.html#cb203-9" tabindex="-1"></a>                                           <span class="st">&quot;Funky&quot;</span>, <span class="st">&quot;Fermented&quot;</span>, <span class="st">&quot;Vomit&quot;</span>,</span>
<span id="cb203-10"><a href="fine-tuning-publication-quality-ggplots.html#cb203-10" tabindex="-1"></a>                                           <span class="st">&quot;Synthetic&quot;</span>, <span class="st">&quot;Candy&quot;</span>,</span>
<span id="cb203-11"><a href="fine-tuning-publication-quality-ggplots.html#cb203-11" tabindex="-1"></a>                                           <span class="st">&quot;Metallic&quot;</span>, <span class="st">&quot;Alcohol&quot;</span>))) <span class="ot">-&gt;</span> long_cider_manual_factors</span>
<span id="cb203-12"><a href="fine-tuning-publication-quality-ggplots.html#cb203-12" tabindex="-1"></a></span>
<span id="cb203-13"><a href="fine-tuning-publication-quality-ggplots.html#cb203-13" tabindex="-1"></a>long_cider_manual_factors <span class="sc">%&gt;%</span></span>
<span id="cb203-14"><a href="fine-tuning-publication-quality-ggplots.html#cb203-14" tabindex="-1"></a>  <span class="fu">filter</span>(checked <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb203-15"><a href="fine-tuning-publication-quality-ggplots.html#cb203-15" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cata_variable)) <span class="sc">+</span></span>
<span id="cb203-16"><a href="fine-tuning-publication-quality-ggplots.html#cb203-16" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb203-17"><a href="fine-tuning-publication-quality-ggplots.html#cb203-17" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb203-18"><a href="fine-tuning-publication-quality-ggplots.html#cb203-18" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Temperature), <span class="fu">vars</span>(Sample_Name))</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/unnamed-chunk-1-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Note that the attribute you list <em>first</em> when you’re specifying the <code>levels</code> will become 1, then 2, then 3. With <code>coord_flip()</code>, that puts it at the bottom of the plot.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="fine-tuning-publication-quality-ggplots.html#cb204-1" tabindex="-1"></a>long_cider_manual_factors <span class="sc">%&gt;%</span></span>
<span id="cb204-2"><a href="fine-tuning-publication-quality-ggplots.html#cb204-2" tabindex="-1"></a>  <span class="fu">distinct</span>(cata_variable) <span class="sc">%&gt;%</span></span>
<span id="cb204-3"><a href="fine-tuning-publication-quality-ggplots.html#cb204-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable_number =</span> <span class="fu">as.numeric</span>(cata_variable))</span></code></pre></div>
<pre><code>## # A tibble: 22 × 2
##    cata_variable variable_number
##    &lt;fct&gt;                   &lt;dbl&gt;
##  1 Fresh_Apples               10
##  2 Fermented                  17
##  3 Herbal                     13
##  4 Dry                         5
##  5 Spice                      12
##  6 Fruity                      8
##  7 Smooth                      4
##  8 Alcohol                    22
##  9 Light                       7
## 10 Sweet                       1
## # ℹ 12 more rows</code></pre>
<p>This gives us control, but it’s pretty annoying to write out for large lists of attributes, and you have to be sure the spelling and capitalization match exactly. Often, like with the penalty analysis plots, what we actually want to do is order the Attributes in terms of some other numerical variable, like frequency or size of penalty.</p>
<p>One way is to <code>arrange()</code> the data the way you want it and then use that order to specify the levels.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="fine-tuning-publication-quality-ggplots.html#cb206-1" tabindex="-1"></a>long_cider_data <span class="sc">%&gt;%</span></span>
<span id="cb206-2"><a href="fine-tuning-publication-quality-ggplots.html#cb206-2" tabindex="-1"></a>  <span class="co"># Counting the number of times each attribute is used across all products:</span></span>
<span id="cb206-3"><a href="fine-tuning-publication-quality-ggplots.html#cb206-3" tabindex="-1"></a>  <span class="fu">group_by</span>(cata_variable) <span class="sc">%&gt;%</span></span>
<span id="cb206-4"><a href="fine-tuning-publication-quality-ggplots.html#cb206-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable_count =</span> <span class="fu">sum</span>(checked)) <span class="sc">%&gt;%</span></span>
<span id="cb206-5"><a href="fine-tuning-publication-quality-ggplots.html#cb206-5" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb206-6"><a href="fine-tuning-publication-quality-ggplots.html#cb206-6" tabindex="-1"></a>  <span class="co"># Arranging from least-to-most used:</span></span>
<span id="cb206-7"><a href="fine-tuning-publication-quality-ggplots.html#cb206-7" tabindex="-1"></a>  <span class="fu">arrange</span>(variable_count) <span class="sc">%&gt;%</span></span>
<span id="cb206-8"><a href="fine-tuning-publication-quality-ggplots.html#cb206-8" tabindex="-1"></a>  <span class="co"># Converting to a factor, so the least-used will be 1st, then the next:</span></span>
<span id="cb206-9"><a href="fine-tuning-publication-quality-ggplots.html#cb206-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> <span class="fu">factor</span>(cata_variable, <span class="at">levels =</span> <span class="fu">unique</span>(cata_variable),</span>
<span id="cb206-10"><a href="fine-tuning-publication-quality-ggplots.html#cb206-10" tabindex="-1"></a>                            <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-11"><a href="fine-tuning-publication-quality-ggplots.html#cb206-11" tabindex="-1"></a>         <span class="at">variable_number =</span> <span class="fu">as.numeric</span>(cata_variable)) <span class="ot">-&gt;</span> long_cider_frequency_factors</span>
<span id="cb206-12"><a href="fine-tuning-publication-quality-ggplots.html#cb206-12" tabindex="-1"></a></span>
<span id="cb206-13"><a href="fine-tuning-publication-quality-ggplots.html#cb206-13" tabindex="-1"></a><span class="co">#Now the plot:</span></span>
<span id="cb206-14"><a href="fine-tuning-publication-quality-ggplots.html#cb206-14" tabindex="-1"></a>long_cider_frequency_factors <span class="sc">%&gt;%</span></span>
<span id="cb206-15"><a href="fine-tuning-publication-quality-ggplots.html#cb206-15" tabindex="-1"></a>  <span class="fu">filter</span>(checked <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb206-16"><a href="fine-tuning-publication-quality-ggplots.html#cb206-16" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cata_variable)) <span class="sc">+</span></span>
<span id="cb206-17"><a href="fine-tuning-publication-quality-ggplots.html#cb206-17" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb206-18"><a href="fine-tuning-publication-quality-ggplots.html#cb206-18" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb206-19"><a href="fine-tuning-publication-quality-ggplots.html#cb206-19" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Temperature), <span class="fu">vars</span>(Sample_Name))</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="facets-with-different-category-orders" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Facets with Different Category-Orders<a href="fine-tuning-publication-quality-ggplots.html#facets-with-different-category-orders" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You’ll notice that our reordered categorical axes still have the same order across all of the plots. This would be true even if we changed our <code>group_by()</code> call and used within-product sums to calculate <code>level</code>s. The order is based on factor levels for a single column, and <code>Fresh_Apples</code> can’t be “more than” <code>Dry</code> in one part of the column and “less than” in another part.</p>
<p>On its own, <code>facet_wrap(..., scales = "free")</code> can drop unneeded attributes from plots, but it will still keep the same <em>order</em> of the attributes across all axes.</p>
<p>If you have a faceted plot and you want each facet to have a different ordering of the terms, like in our big penalty analysis example, you’ll have to use <code>tidytext::reorder_within()</code>, <code>tidytext::scale_*_reordered()</code>, <em>and</em> <code>facet_wrap(..., scales = "free")</code>, all at once:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="fine-tuning-publication-quality-ggplots.html#cb207-1" tabindex="-1"></a>long_cider_data <span class="sc">%&gt;%</span></span>
<span id="cb207-2"><a href="fine-tuning-publication-quality-ggplots.html#cb207-2" tabindex="-1"></a>  <span class="co"># Counting the number of times each attribute is used across all products:</span></span>
<span id="cb207-3"><a href="fine-tuning-publication-quality-ggplots.html#cb207-3" tabindex="-1"></a>  <span class="fu">group_by</span>(Sample_Name, Temperature, cata_variable) <span class="sc">%&gt;%</span></span>
<span id="cb207-4"><a href="fine-tuning-publication-quality-ggplots.html#cb207-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Product =</span> <span class="fu">str_c</span>(Sample_Name, <span class="st">&quot; (&quot;</span>, Temperature, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb207-5"><a href="fine-tuning-publication-quality-ggplots.html#cb207-5" tabindex="-1"></a>         <span class="at">variable_count =</span> <span class="fu">sum</span>(checked),</span>
<span id="cb207-6"><a href="fine-tuning-publication-quality-ggplots.html#cb207-6" tabindex="-1"></a>         <span class="at">cata_variable =</span> tidytext<span class="sc">::</span><span class="fu">reorder_within</span>(cata_variable,</span>
<span id="cb207-7"><a href="fine-tuning-publication-quality-ggplots.html#cb207-7" tabindex="-1"></a>                                                  <span class="at">by =</span> variable_count,</span>
<span id="cb207-8"><a href="fine-tuning-publication-quality-ggplots.html#cb207-8" tabindex="-1"></a>                                                  <span class="at">within =</span> <span class="fu">list</span>(Sample_Name, Temperature))) <span class="sc">%&gt;%</span></span>
<span id="cb207-9"><a href="fine-tuning-publication-quality-ggplots.html#cb207-9" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb207-10"><a href="fine-tuning-publication-quality-ggplots.html#cb207-10" tabindex="-1"></a>  <span class="fu">filter</span>(checked <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb207-11"><a href="fine-tuning-publication-quality-ggplots.html#cb207-11" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cata_variable)) <span class="sc">+</span></span>
<span id="cb207-12"><a href="fine-tuning-publication-quality-ggplots.html#cb207-12" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb207-13"><a href="fine-tuning-publication-quality-ggplots.html#cb207-13" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb207-14"><a href="fine-tuning-publication-quality-ggplots.html#cb207-14" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb207-15"><a href="fine-tuning-publication-quality-ggplots.html#cb207-15" tabindex="-1"></a>  <span class="co"># This will not work with facet_grid, because it forces all plots in a row to</span></span>
<span id="cb207-16"><a href="fine-tuning-publication-quality-ggplots.html#cb207-16" tabindex="-1"></a>  <span class="co"># share a vertical axis, even with scales = &quot;free&quot;</span></span>
<span id="cb207-17"><a href="fine-tuning-publication-quality-ggplots.html#cb207-17" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Product,</span>
<span id="cb207-18"><a href="fine-tuning-publication-quality-ggplots.html#cb207-18" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="putting-it-all-together" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Putting it all together<a href="fine-tuning-publication-quality-ggplots.html#putting-it-all-together" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, at long last, we’re ready to walk line-by-line through the example penalty analysis figure that we’ve just been copy-pasting so far in the workshop.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="fine-tuning-publication-quality-ggplots.html#cb208-1" tabindex="-1"></a>berry_penalty_analysis_data <span class="sc">%&gt;%</span></span>
<span id="cb208-2"><a href="fine-tuning-publication-quality-ggplots.html#cb208-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>count) <span class="sc">%&gt;%</span></span>
<span id="cb208-3"><a href="fine-tuning-publication-quality-ggplots.html#cb208-3" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> checked,</span>
<span id="cb208-4"><a href="fine-tuning-publication-quality-ggplots.html#cb208-4" tabindex="-1"></a>              <span class="at">values_from =</span> penalty_lift,</span>
<span id="cb208-5"><a href="fine-tuning-publication-quality-ggplots.html#cb208-5" tabindex="-1"></a>              <span class="at">names_prefix =</span> <span class="st">&quot;checked_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb208-6"><a href="fine-tuning-publication-quality-ggplots.html#cb208-6" tabindex="-1"></a>  <span class="fu">separate</span>(cata_variable, </span>
<span id="cb208-7"><a href="fine-tuning-publication-quality-ggplots.html#cb208-7" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;mode&quot;</span>, <span class="st">&quot;variable&quot;</span>), </span>
<span id="cb208-8"><a href="fine-tuning-publication-quality-ggplots.html#cb208-8" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb208-9"><a href="fine-tuning-publication-quality-ggplots.html#cb208-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">penalty_lift =</span> checked_1 <span class="sc">-</span> checked_0,</span>
<span id="cb208-10"><a href="fine-tuning-publication-quality-ggplots.html#cb208-10" tabindex="-1"></a>         <span class="at">mode =</span> <span class="fu">case_when</span>(mode <span class="sc">==</span> <span class="st">&quot;taste&quot;</span> <span class="sc">~</span> <span class="st">&quot;(T)&quot;</span>,</span>
<span id="cb208-11"><a href="fine-tuning-publication-quality-ggplots.html#cb208-11" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearance&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>,</span>
<span id="cb208-12"><a href="fine-tuning-publication-quality-ggplots.html#cb208-12" tabindex="-1"></a>                          mode <span class="sc">==</span> <span class="st">&quot;appearane&quot;</span> <span class="sc">~</span> <span class="st">&quot;(A)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb208-13"><a href="fine-tuning-publication-quality-ggplots.html#cb208-13" tabindex="-1"></a>  <span class="fu">unite</span>(variable, mode, <span class="at">col =</span> <span class="st">&quot;cata_variable&quot;</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb208-14"><a href="fine-tuning-publication-quality-ggplots.html#cb208-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cata_variable =</span> tidytext<span class="sc">::</span><span class="fu">reorder_within</span>(<span class="at">x =</span> cata_variable,</span>
<span id="cb208-15"><a href="fine-tuning-publication-quality-ggplots.html#cb208-15" tabindex="-1"></a>                                                  <span class="at">by =</span> penalty_lift,</span>
<span id="cb208-16"><a href="fine-tuning-publication-quality-ggplots.html#cb208-16" tabindex="-1"></a>                                                  <span class="at">within =</span> berry)) <span class="sc">%&gt;%</span></span>
<span id="cb208-17"><a href="fine-tuning-publication-quality-ggplots.html#cb208-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cata_variable, <span class="at">y =</span> penalty_lift)) <span class="sc">+</span></span>
<span id="cb208-18"><a href="fine-tuning-publication-quality-ggplots.html#cb208-18" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> penalty_lift), <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb208-19"><a href="fine-tuning-publication-quality-ggplots.html#cb208-19" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>berry, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb208-20"><a href="fine-tuning-publication-quality-ggplots.html#cb208-20" tabindex="-1"></a>  tidytext<span class="sc">::</span><span class="fu">scale_x_reordered</span>() <span class="sc">+</span> </span>
<span id="cb208-21"><a href="fine-tuning-publication-quality-ggplots.html#cb208-21" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb208-22"><a href="fine-tuning-publication-quality-ggplots.html#cb208-22" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span> </span>
<span id="cb208-23"><a href="fine-tuning-publication-quality-ggplots.html#cb208-23" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;tan&quot;</span>, <span class="at">high =</span> <span class="st">&quot;darkgreen&quot;</span>) <span class="sc">+</span> </span>
<span id="cb208-24"><a href="fine-tuning-publication-quality-ggplots.html#cb208-24" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb208-25"><a href="fine-tuning-publication-quality-ggplots.html#cb208-25" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Penalty / Lift Analysis&quot;</span>,</span>
<span id="cb208-26"><a href="fine-tuning-publication-quality-ggplots.html#cb208-26" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;displays the mean difference (within berries) for when a CATA variable is checked</span><span class="sc">\n</span><span class="st">or un-checked&quot;</span>)</span></code></pre></div>
<p><img src="05-finetuning-ggplot_files/figure-html/final%20walkthrough%20of%20penalty%20analysis-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="using-ggplot-with-other-packages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="wrap-up-and-further-resources.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
